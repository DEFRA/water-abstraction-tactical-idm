### Changelog

All notable changes to this project will be documented in this file. Dates are displayed in UTC.

Generated by [`auto-changelog`](https://github.com/CookPete/auto-changelog).

#### 1.13.0

> 20 November 2018

- Feat: Makes user reset guid valid for 24 hours. [`#60`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/60)
- Feat: Adds proxy support for logging to Errbit [`#59`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/59)
- Feature: Improves logging [`#58`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/58)
- Include user_name in return data from auth call [`#57`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/57)
- Fix: Update airbrake js [`#56`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/56)
- Feat: Separate test tasks [`#55`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/55)
- Fix: WATER-1415 bad logins count [`#54`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/54)
- Feat: Remove UTM params from some routes [`#53`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/53)
- Feature: Update user roles from crm [`#52`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/52)
- Reduce DB pool size [`#51`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/51)
- Fix: Reset password [`#50`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/50)
- feature: Use application when authenticating [`#48`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/48)
- Adds connection pool logging [`#49`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/49)
- Feature/water 1270 update user table with roles [`#47`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/47)
- feature: Adds roles to idm [`#46`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/46)
- Corrects use of user_data type [`#45`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/45)
- Changes the type for the user_data field [`#44`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/44)
- Adds ecosystem.config.json file for PM2 [`#43`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/43)
- Add test to check password is case sensitive in authentication [`#42`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/42)
- Add additional unit tests [`#41`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/41)
- WATER-1180: Update to HAPI 17 [`#40`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/40)
- Remove buggy migration [`#39`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/39)
- fix daves stoopid [`#38`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/38)
- additional queries for KPI reporting [`#37`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/37)
- Create /kpi endpoint using a view [`#36`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/36)
- Remove git+ [`#35`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/35)
- Remove extra brace [`#34`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/34)
- Improve travis unit test pipeline [`#33`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/33)
- Add utm codes [`#31`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/31)
- Add friendly readme [`#30`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/30)
- Feat/travis [`#29`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/29)
- Create password reset GUID can now be sent via share access email - u… [`#28`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/28)
- Updating dependencies [`#27`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/27)
- modifying the UTM link in all the emails sent by the system to includ… [`#26`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/26)
- Update hapi-pg-rest-api [`#25`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/25)
- Feat/water 608 [`#21`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/21)
- tweak migration script [`#20`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/20)
- Feature/usertype metadata [`#19`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/19)
- include user_data in login response [`#18`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/18)
- Support for WATER-665. Added patch update to user_id so that we can u… [`#17`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/17)
- water-599-notify-wrapper [`#16`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/16)
- Add ability to filter users by reset guid.  Rewrite change password f… [`#15`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/15)
- Add reset require option to quiet password reset.  return last_login … [`#14`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/14)
- Add new 'quiet' method to reset user's reset guid without sending not… [`#13`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/13)
- merge release db-migrate into develop [`#12`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/12)
- Add ability to find IDM user by email address [`#11`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/11)
- Include slack reporting from IDM in private beta release 2 [`#10`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/10)
- Merge branch 'release/private_beta_release_2' [`#8`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/8)
- slack v1 [`#9`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/9)
- Bugfix in reset password call (if no name).   Return DB error code. [`#7`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/7)
- Ensure unique username [`#6`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/6)
- Add npm task for db migration [`#4`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/4)
- Feat/env vars [`#3`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/3)
- db-migration [`#2`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/2)
- Feat/api tests [`#1`](https://github.com/DEFRA/water-abstraction-tactical-idm/pull/1)
- Adds code climate badges [`77c0dc9`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/77c0dc99f7e989729577e374212bb2c68c7676a6)
- Feat: Aligns with developer standards [`5c76fba`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/5c76fba2645dff7a5f96a6528c43edc60015f9a8)
- Bumps har-validator version to 5.1.3 [`1feb6fd`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/1feb6fdebd4336db62efff0f64aa3c4b9fb3aa5f)
- Merge tag 'public_beta_1.12' into develop [`bea4290`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/bea4290ed80102538353d8b776852e03c40d3726)
- Fix: Fixes an issue where a function was logged [`1d18dc7`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/1d18dc7e96e67f0d8af9eaf2f430f42c9cd6be05)
- Merge tag 'public_beta_1.11' into develop [`a28f5dc`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/a28f5dca8b08526de5cff059acca213586c23037)
- WATER-1272: Rewrites migrations [`47aab80`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/47aab801f7fc21b158d95f44e52ea6bd52c6ac6e)
- Extracts unique constraint into separate migration [`d4affa0`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/d4affa0104323257134698fb697b260632481039)
- Adds composite unique constraint to users [`7bf5b94`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/7bf5b94003f0d381e4bb68f23d2b3f4630e5ef2d)
- Merge tag 'public_beta_1.6' into develop [`1241454`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/1241454388790e8c13f63dadda98d33319cef1f5)
- Reduce pool size [`98a1825`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/98a18258431dcb833e9162b0094001e219972848)
- Enables clustering in PM2 ecosystem config [`310af66`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/310af666c43c24c548f532031737442618e86d79)
- Code climate fixes [`228a035`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/228a03548f2a242ada2e25adab7a653af1a3c68b)
- Fixes admin login error [`180de50`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/180de5080c36ba64eeb01344ecff4d415bf32438)
- Updates Lab now Hapi is v17 [`f87257d`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/f87257d4b826c757c03d7d82b646265961dd3bbf)
- Use the correct version of hoek [`ac6c552`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/ac6c552559c63d652ce7d5062d6a44a28cb23870)
- Include lodash to fix security issues [`d5829c3`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/d5829c3ad7ac437962bdb8fb0e3e458bdc49f0e9)
- Node Security updates [`ae7d7e0`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/ae7d7e0fea7e8252f092e447712ae0c426dbe28e)
- Update 20180501124503-fix-daves-stoopid-up.sql [`1443201`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/1443201def4f0736de89e0cef2872a1d402b15c6)
- Update 20180501124503-fix-daves-stoopid-up.sql [`9ad8319`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/9ad831986b7c6e2cc2f4b534e891b1268b2000ae)
- Update 20180501124503-fix-daves-stoopid-up.sql [`6588cc2`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/6588cc2387e2ab4cb000bcc6ccd58529a974149d)
- Fix package.lock [`c80c957`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/c80c957d07fb328357dc30af0abaa99fb159df30)
- Update README.MD [`8d32a97`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/8d32a973bfa059f4cc8968d4fa36074b59c58501)
- merge issues [`233b4e7`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/233b4e747ab60842e39713263eb75af518426082)
- Add build status badge [`616b613`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/616b6133b272be5e9c54205bc8ed16e72371b44a)
- Add dev deps [`fcef276`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/fcef276aa4e68cc9a9c04e9337ef7b4e61d8d1c0)
- Tweak migrations [`d2d09e3`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/d2d09e3a4be61432f10f541241c91c53a5a3e7b8)
- Travis integration / unit tests [`5249fed`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/5249fed4e8581d69d76fd7be6a68227135854b4e)
- Create password reset GUID can now be sent via share access email - using mode=sharing [`d80887c`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/d80887cf0998dbeaaad9e0cec61f096dbcff60dc)
- include last login in idm response & stop posting to slack so much... [`10f67be`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/10f67bef9368f5c41649094857691c527d51f5dc)
- adjust utm_source [`04a5ab3`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/04a5ab398e201136e742d7bef08089aa684724e2)
- modifying the UTM link in all the emails sent by the system to include tracking parameters [`0e9e6ca`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/0e9e6cab988bfe9248b03284552823d658ceaaf9)
- Adjust package files to remove git+ reference [`bf4748b`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/bf4748b39c73110524eed029da0b44c86068f55b)
- Remove old route handlers [`49c7b50`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/49c7b50044a9616ef481cee869e76346f33db9ed)
- Send different reset URL for create account flow [`dca8b8d`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/dca8b8d842d1bc59478f8df64a1d588b7315ad32)
- Notify personalisation depending on reset mode [`96b987d`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/96b987ddee563a3418782ef51f1daf4758cbcd94)
- Adding single reset route to IDM which can send one of several different reset email templates [`6e505f3`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/6e505f398fd431c9802f8ee7b2917730e6e7dea2)
- Save the file. Duh! [`10ff8b3`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/10ff8b3a501a9fd742a41077c2adccf80749beaf)
- Set usertype and firstname in users.userdata [`89dc106`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/89dc1064383f45cff4149bd00b08428fcd07f425)
- Updating users routes to use hapi-pg-rest-api [`8900c79`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/8900c7914dbcd30fe0de9bd13e28069c125462d5)
- Hotfix for db create issue [`b58f803`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/b58f803e1333e10a97eacc143309a0abfc20d299)
- missed a bit [`ab6985b`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/ab6985b25a6ed39ef91fc1d9c15b5fbc0caebe57)
- remove aborted metadata field [`0992888`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/0992888fabac871a0afa7fc2ebf5da8935ef7705)
- Support for WATER-665. Added patch update to user_id so that we can update user_data with usertype attribute if required [`0ed0465`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/0ed0465cc87f099021deb8a84da94535ccc7899e)
- Update README.MD [`2ab838c`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/2ab838cddc0416327a57f75cc07b443d89662f8a)
- Add ability to filter users by reset guid.  Rewrite change password function with async/await [`e28b289`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/e28b289f85f32c42a319ef3c70389fc5d6f694da)
- Hotfix new notify template URL [`bd64da4`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/bd64da4c4f88df5cb73a5a4ad7087b6191b04ced)
- Wrong reset guid fix [`9362bc3`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/9362bc33be2475928aeafdb5e5d86d9cbf9a2185)
- Add reset require option to quiet password reset.  return last_login field value. [`ba99146`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/ba9914617c0850dcbde6d3dff382f1f19586dd48)
- Add new 'quiet' method to reset user's reset guid without sending notify email [`14f0b85`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/14f0b850f82a156f319ab24bb1a695297cbe9be8)
- resolve db-migrate issue [`7e7082b`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/7e7082b8c010cd5b7035b7869a0420a24a31c461)
- force migration rerun by renaming file [`2fb0971`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/2fb0971930c1bffd5a8a9c3678413ec3a9bd06a0)
- actual migration [`7bb3d9a`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/7bb3d9acb4fb0b4ff4c62024676572eade68cb9a)
- db migration [`4bced13`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/4bced13b67c6275fe3ac8e779c38978a1e57ebb4)
- Missing request-promise-native [`08dc22d`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/08dc22de296dd227759b41c27efdfe799bd0424e)
- summary only [`3065d31`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/3065d31c77e221e5ad0fb4028cd09a535d5bfcdc)
- slack post login history... [`a287901`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/a287901e9a39a6dcf2480a6333a05da47ff520c1)
- slack tweaks [`cb6c329`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/cb6c3299e7691426096e2e2bd75ca9bcd3741833)
- fix slack connection [`3330168`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/3330168c5b476d4f8ced5feeb65d24ff4bf69f3a)
- fix missing coliumn in migrate script [`54074bd`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/54074bd2d359307d16ea45a6766115635b81438d)
- Updated readme [`cae9a54`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/cae9a54c7b16f94721a71b05b49f1069ccbf474f)
- modify payload validation [`d973d39`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/d973d39ba41bb5fc147b29f388f152b33a6070f3)
- hotfix admin flag [`c87f10e`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/c87f10edd8d20228334813fac7d9e51edc72083c)
- remove postgres role from db scripts [`6ad9319`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/6ad931934d747b2737e21003452b671cc653bb93)
- Adding env vars to readme [`d93d036`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/d93d036388b0e3c349ca2cab1836b4d60aa73ee3)
- Remove docs from git for now [`f882b54`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/f882b54ea32c80889a1af3da7f6fdbf23a3af728)
- Add package lock [`e6fc81d`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/e6fc81d8d75f16546921c1d51655cba638a498ad)
- update notify connector to use provided url for links [`6f04096`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/6f04096d3f2df19f840e91d2f0a1f2b46bb4cf4b)
- Adding changepassword test, renamed tests to same URL [`764c499`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/764c4999d1a25bc3d053a0e58257edc45c4558bf)
- Add status test [`2afe652`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/2afe65247c6a771f2c6fcceffe7706997c8620ce)
- Adding test for get users list [`992b69e`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/992b69eb4b71431e6a60edee61b35ecce3721c5f)
- Adding change password tests [`1a00a9b`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/1a00a9bf57b493b398877e2f709bec1ce6a260ae)
- Adding tests for create user [`e8c6ff5`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/e8c6ff575e6cbe1191537203285586adab5c4fd3)
- Adding further tests for password reset.  Generate 404 if user not found on POST reset [`ff73d94`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/ff73d94f7a030447b22cca033cbeea62b94673c9)
- Adding reset password tests [`7f790e3`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/7f790e34cf16f6e51ba320e61441ea8d70845acd)
- Adding tests for login, loginAdmin and get user [`9ad0e3f`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/9ad0e3f29439f78dc1bcd3e112c21b5e39b3d130)
- HTTP mocha test [`6748158`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/674815868379080bd22ad963140ed15f81401e3d)
- breaking changes JWT + node 8 [`0f06926`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/0f069260304ea29a3f033d66584d8a567b4d5171)
- blipp and errbit [`29db90c`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/29db90c7ba12c0f3428c236f6ddc5b42b41a9871)
- blipp and errbit [`b1e931b`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/b1e931b5bde048ca3bb1382e731886e4ddda42d4)
- water-508 [`53bba7d`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/53bba7dd3b792de92c7a038fdca00ec1d9c4c142)
- notify personalisation changes [`07e62a6`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/07e62a6217428fe51d21a91d5cabf86e254b0054)
- assign document to entity [`596e98a`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/596e98acaaa478e45c40b173d85e29c755558e7c)
- general ammendments [`6f1d611`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/6f1d61172161967cf01834dd67a0bc3b7dfa9309)
- further bugfixes [`b5c483d`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/b5c483d09c97ac4f217350ab265651a3fd6e3df7)
- further bugfixes [`7c7bf73`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/7c7bf73878f558e3f321de6a8fd746d552c05932)
- resolve issues raised in testing [`f4a42e2`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/f4a42e27616ed889502624abb434df294cd0313f)
- extra debug [`fb76aeb`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/fb76aeb0123b21bbfa322826918a0b67800e7eb3)
- initial [`86d5731`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/86d573144a347172e12a26daced3d41e9bf497b6)
- initial commit [`29f11f1`](https://github.com/DEFRA/water-abstraction-tactical-idm/commit/29f11f1d3f624cb9219b23a9a975442855ddf0e5)
